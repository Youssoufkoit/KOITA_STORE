{% load static %}
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KOITA_STORE - Recharges Free Fire</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png' %}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Raleway:wght@300;400;500;600;700;800&family=Montserrat:wght@300;400;500;600;700;800;900&family=Bebas+Neue&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header>
    <!-- Logo à gauche -->
    <div class="logo">
      <a href="/">
       <img src="{% static 'images/logo.png' %}" alt="KOITA_STORE Logo">
        <span>KOITA_STORE</span>
      </a>
    </div>
    
    <!-- Navigation au milieu -->
    <nav class="main-nav">
      <a href="/">Accueil</a>
      <a href="/recharges/">Recharges</a>
      <a href="/accounts-for-sale/">Achats comptes</a>
        <a href="/contact/">Contact</a>
    </nav>
    
    <!-- Icônes Profil et Panier à droite -->
    <div class="header-icons">
        <!-- Icône Notification -->
        <a href="{% url 'accounts:notifications' %}" class="icon-btn notification-icon">
            <i class="fas fa-bell"></i>
            {% if user.is_authenticated and user.notifications.unread.count > 0 %}
                <span class="notification-badge">{{ user.notifications.unread.count }}</span>
            {% endif %}
        </a>
        
        <!-- Dropdown Profil -->
        <div class="profile-dropdown">
            <a href="#" class="icon-btn profile-icon" id="profileToggle">
                <i class="fas fa-user-circle"></i>
            </a>
            <div class="dropdown-content" id="profileDropdown">
                {% if user.is_authenticated %}
                    <a href="{% url 'accounts:profile' %}"><i class="fas fa-user"></i> Mon Profil</a>
                    <a href="{% url 'accounts:notifications' %}">
                        <i class="fas fa-bell"></i> Notifications
                        {% if user.notifications.unread.count > 0 %}
                            <span class="notification-count">{{ user.notifications.unread.count }}</span>
                        {% endif %}
                    </a>
                    <a href="{% url 'accounts:order_history' %}"><i class="fas fa-history"></i> Mes Commandes</a>
                    <a href="{% url 'accounts:logout' %}"><i class="fas fa-sign-out-alt"></i> Se déconnecter</a>
                {% else %}
                    <a href="{% url 'accounts:login' %}"><i class="fas fa-sign-in-alt"></i> Connexion</a>
                    <a href="{% url 'accounts:signup' %}"><i class="fas fa-user-plus"></i> Inscription</a>
                {% endif %}
            </div>
        </div>
        
        <!-- Icône Panier -->
        <a href="{% url 'cart:cart_view' %}" class="icon-btn cart-icon">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-badge" id="cartBadge">
                {% if cart_total_items > 0 %}
                    {{ cart_total_items }}
                {% else %}
                    0
                {% endif %}
            </span>
        </a>
    </div>
  </header>

  <main>
    {% block content %}
    <!-- Contenu par défaut qui sera remplacé par les pages enfants -->
    {% endblock %}
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>KOITA_STORE</h3>
        <p>Votre boutique de confiance pour les recharges Free Fire</p>
      </div>
      <div class="footer-section">
        <h3>Liens Rapides</h3>
        <a href="/">Accueil</a>
        <a href="/recharges/">Recharges</a>
        <a href="/accounts-for-sale/">Achats comptes</a>
      </div>
      <div class="footer-section">
        <h3>Contact</h3>
        <p><i class="fas fa-envelope"></i> contact@koitastore.com</p>
        <p><i class="fas fa-phone"></i> +221 XX XXX XX XX</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 KOITA_STORE - Tous droits réservés</p>
    </div>
  </footer>

  <script>
    // Toggle du dropdown de profil
    document.getElementById('profileToggle')?.addEventListener('click', function(e) {
      e.preventDefault();
      document.getElementById('profileDropdown').classList.toggle('show');
    });

    // Fermer le dropdown si on clique ailleurs
    window.addEventListener('click', function(e) {
      if (!e.target.matches('.profile-icon') && !e.target.closest('.profile-icon')) {
        const dropdown = document.getElementById('profileDropdown');
        if (dropdown && dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
        }
      }
    });
  </script>
</body>
</html>
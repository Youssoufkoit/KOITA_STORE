{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Barre de Recherche AmÃ©liorÃ©e avec Filtre Ã  Gauche -->
<section class="search-section-improved">
    <div class="search-container-improved">
        <form method="get" action="{% url 'store:recharges' %}" class="search-form-improved">
            <!-- Filtre de tri Ã  GAUCHE -->
            <div class="filter-left">
                <select name="sort" onchange="this.form.submit()" class="sort-select-improved">
                    <option value="default" {% if sort_by == 'default' %}selected{% endif %}>
                        <i class="fas fa-sort"></i> Trier par
                    </option>
                    <option value="newest" {% if sort_by == 'newest' %}selected{% endif %}>
                        ðŸ“… Plus rÃ©cents
                    </option>
                    <option value="price_asc" {% if sort_by == 'price_asc' %}selected{% endif %}>
                        ðŸ’° Prix croissant
                    </option>
                    <option value="price_desc" {% if sort_by == 'price_desc' %}selected{% endif %}>
                        ðŸ’µ Prix dÃ©croissant
                    </option>
                    <option value="name" {% if sort_by == 'name' %}selected{% endif %}>
                        ðŸ”¤ A-Z
                    </option>
                </select>
            </div>
            
            <!-- Barre de recherche au CENTRE -->
            <div class="search-input-improved">
                <i class="fas fa-search search-icon"></i>
                <input 
                    type="text" 
                    name="search" 
                    placeholder="Rechercher un produit, une catÃ©gorie..." 
                    value="{{ search_query }}"
                    class="search-field-improved"
                    autocomplete="off"
                >
                {% if search_query %}
                <button type="button" class="clear-search" onclick="document.querySelector('.search-field-improved').value=''; this.form.submit();">
                    <i class="fas fa-times"></i>
                </button>
                {% endif %}
            </div>
            
            <!-- Bouton de recherche Ã  DROITE -->
            <button type="submit" class="search-btn-improved">
                <i class="fas fa-search"></i>
                <span>Rechercher</span>
            </button>
            
            <!-- Bouton reset si filtres actifs -->
            {% if selected_category or search_query %}
            <a href="{% url 'store:recharges' %}" class="reset-btn-improved" title="RÃ©initialiser les filtres">
                <i class="fas fa-redo"></i>
            </a>
            {% endif %}
        </form>
        
        <!-- Indicateur de rÃ©sultats -->
        {% if search_query or selected_category %}
        <div class="search-results-indicator">
            <i class="fas fa-filter"></i>
            {% if search_query %}
            <span>Recherche: <strong>"{{ search_query }}"</strong></span>
            {% endif %}
            {% if selected_category %}
            <span>CatÃ©gorie: <strong>{{ selected_category.name }}</strong></span>
            {% endif %}
            <span class="result-count">{{ products.count }} rÃ©sultat{{ products.count|pluralize }}</span>
        </div>
        {% endif %}
    </div>
</section>

<!-- CatÃ©gories avec Images (comme les produits) -->
<section class="categories-with-images">
    <div class="section-header-categories">
        <h2><i class="fas fa-th-large"></i> CatÃ©gories</h2>
        <p>Explorez nos diffÃ©rentes catÃ©gories de produits</p>
    </div>
    
    <div class="categories-grid-images">
        <!-- Carte TOUT -->
        <a href="{% url 'store:recharges' %}" class="category-card-image {% if not selected_category %}active{% endif %}">
            <div class="category-image-wrapper">
                <img src="{% static 'images/002.jpg' %}" alt="Tous les produits" class="category-img">
                <div class="category-overlay">
                    <div class="category-overlay-content">
                        <i class="fas fa-th-large category-icon-large"></i>
                        <h3>Tout Voir</h3>
                        <p>{{ total_products }} produits</p>
                    </div>
                </div>
            </div>
            <div class="category-info-bottom">
                <h4>Tous les Produits</h4>
                <span class="category-count">
                    <i class="fas fa-box"></i> {{ total_products }}
                </span>
            </div>
        </a>
        
        {% for category in categories %}
        <a href="{% url 'store:recharges' %}?category={{ category.slug }}" 
           class="category-card-image {% if selected_category.id == category.id %}active{% endif %}">
            <div class="category-image-wrapper">
                {% if category.image %}
                    <img src="{{ category.image.url }}" alt="{{ category.name }}" class="category-img">
                {% else %}
                    <div class="category-img-placeholder">
                        <i class="{{ category.icon }} placeholder-icon"></i>
                    </div>
                {% endif %}
                <div class="category-overlay">
                    <div class="category-overlay-content">
                        <i class="{{ category.icon }} category-icon-large"></i>
                        <h3>{{ category.name }}</h3>
                        <p>{{ category.products.count }} produit{{ category.products.count|pluralize }}</p>
                    </div>
                </div>
            </div>
            <div class="category-info-bottom">
                <h4>{{ category.name }}</h4>
                <span class="category-count">
                    <i class="fas fa-box"></i> {{ category.products.count }}
                </span>
            </div>
        </a>
        {% endfor %}
    </div>
</section>

<!-- Grille de Produits -->
<section class="products-showcase">
    <div class="showcase-header">
        <div class="header-left">
            <h2>
                {% if selected_category %}
                    <i class="{{ selected_category.icon }}"></i> {{ selected_category.name }}
                {% elif search_query %}
                    <i class="fas fa-search"></i> RÃ©sultats pour "{{ search_query }}"
                {% else %}
                    <i class="fas fa-fire"></i> Nos Produits
                {% endif %}
            </h2>
            <span class="result-count">{{ products.count }} article{{ products.count|pluralize }} trouvÃ©{{ products.count|pluralize }}</span>
        </div>
    </div>
    
    {% if products %}
    <div class="products-grid-modern">
        {% for product in products %}
        <div class="modern-product-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:0|divisibleby:4|yesno:'0,100,200,300' }}">
            {% if product.is_featured %}
            <div class="corner-badge featured">
                <i class="fas fa-star"></i>
            </div>
            {% endif %}
            
            <div class="product-image-wrapper">
                {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                {% else %}
                    <div class="product-img-placeholder">
                        <i class="fas fa-image"></i>
                    </div>
                {% endif %}
                
                <div class="quick-view-overlay">
                    <a href="{% url 'store:product_detail' product.pk %}" class="quick-view-btn">
                        <i class="fas fa-eye"></i> DÃ©tails
                    </a>
                </div>
                
                {% if product.get_stock_status == 'low_stock' %}
                <span class="stock-indicator warning">
                    <i class="fas fa-exclamation-circle"></i> Stock limitÃ©
                </span>
                {% elif product.get_stock_status == 'out_of_stock' %}
                <span class="stock-indicator danger">
                    <i class="fas fa-times-circle"></i> Rupture
                </span>
                {% endif %}
            </div>
            
            <div class="product-content">
                <div class="product-category-badge">
                    <i class="{{ product.category.icon }}"></i>
                    {{ product.category.name }}
                </div>
                
                <h3 class="product-title">{{ product.name }}</h3>
                <p class="product-desc">{{ product.description|truncatechars:60 }}</p>
                
                <div class="product-footer-modern">
                    <div class="price-section">
                        <span class="price-amount">{{ product.price|floatformat:0 }}</span>
                        <span class="price-currency">FCFA</span>
                    </div>
                    
                    {% if product.is_available %}
                    <form action="{% url 'cart:add_to_cart' product.id %}" method="post" class="quick-add-form">
                        {% csrf_token %}
                        <button type="submit" class="add-cart-btn">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Ajouter</span>
                        </button>
                    </form>
                    {% else %}
                    <button class="add-cart-btn disabled" disabled>
                        <i class="fas fa-ban"></i>
                        <span>Indisponible</span>
                    </button>
                    {% endif %}
                </div>
                
                {% if product.is_available %}
                <div class="stock-info-bottom">
                    <i class="fas fa-box"></i> {{ product.stock }} disponible{{ product.stock|pluralize }}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% else %}
    <div class="empty-state-modern">
        <div class="empty-icon">
            <i class="fas fa-search"></i>
        </div>
        <h3>Aucun produit trouvÃ©</h3>
        <p>
            {% if search_query %}
                Aucun rÃ©sultat pour "{{ search_query }}"
            {% else %}
                Aucun produit dans cette catÃ©gorie
            {% endif %}
        </p>
        <a href="{% url 'store:recharges' %}" class="btn-back-home">
            <i class="fas fa-arrow-left"></i> Voir tous les produits
        </a>
    </div>
    {% endif %}
</section>

<style>
/* ========================================
   BARRE DE RECHERCHE AMÃ‰LIORÃ‰E
======================================== */
.search-section-improved {
    margin-bottom: 3rem;
}

.search-container-improved {
    background: var(--white);
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 10px 40px var(--shadow-light);
    border: 3px solid var(--border-color);
}

.search-form-improved {
    display: grid;
    grid-template-columns: 200px 1fr auto auto;
    gap: 1rem;
    align-items: center;
}

/* Filtre Ã  gauche */
.filter-left {
    position: relative;
}

.sort-select-improved {
    width: 100%;
    padding: 1rem 1.2rem;
    border: 3px solid var(--border-color);
    border-radius: 15px;
    background: var(--white);
    font-family: "Montserrat", sans-serif;
    font-weight: 600;
    font-size: 1rem;
    color: var(--dark-gray);
    cursor: pointer;
    transition: all 0.3s ease;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ff6b35' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 3rem;
}

.sort-select-improved:hover,
.sort-select-improved:focus {
    border-color: var(--primary-orange);
    box-shadow: 0 0 20px var(--orange-glow);
}

/* Barre de recherche au centre */
.search-input-improved {
    position: relative;
    display: flex;
    align-items: center;
    background: var(--light-gray);
    border-radius: 15px;
    border: 3px solid var(--border-color);
    transition: all 0.3s ease;
}

.search-input-improved:focus-within {
    border-color: var(--primary-orange);
    box-shadow: 0 0 25px var(--orange-glow);
    transform: translateY(-2px);
}

.search-icon {
    position: absolute;
    left: 1.5rem;
    color: var(--primary-orange);
    font-size: 1.3rem;
    pointer-events: none;
    transition: transform 0.3s ease;
}

.search-input-improved:focus-within .search-icon {
    transform: scale(1.2);
}

.search-field-improved {
    flex: 1;
    border: none;
    background: transparent;
    padding: 1rem 1rem 1rem 4rem;
    font-size: 1.05rem;
    font-family: "Raleway", sans-serif;
    color: var(--dark-gray);
    outline: none;
}

.search-field-improved::placeholder {
    color: #999;
}

.clear-search {
    position: absolute;
    right: 1rem;
    background: none;
    border: none;
    color: #999;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.5rem;
    transition: all 0.3s ease;
}

.clear-search:hover {
    color: var(--primary-orange);
    transform: rotate(90deg);
}

/* Bouton de recherche */
.search-btn-improved {
    padding: 1rem 2rem;
    background: linear-gradient(135deg, var(--primary-orange), var(--dark-orange));
    color: var(--white);
    border: none;
    border-radius: 15px;
    font-weight: 700;
    font-family: "Montserrat", sans-serif;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    box-shadow: 0 5px 20px var(--orange-glow);
}

.search-btn-improved:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px var(--orange-glow);
}

.search-btn-improved:active {
    transform: translateY(0);
}

/* Bouton reset */
.reset-btn-improved {
    width: 55px;
    height: 55px;
    background: #e74c3c;
    color: var(--white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    font-size: 1.2rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
}

.reset-btn-improved:hover {
    background: #c0392b;
    transform: rotate(180deg) scale(1.1);
}

/* Indicateur de rÃ©sultats */
.search-results-indicator {
    margin-top: 1.5rem;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, rgba(56, 182, 255, 0.1), rgba(26, 101, 158, 0.1));
    border-radius: 12px;
    border: 2px solid var(--secondary-blue);
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.search-results-indicator i {
    color: var(--secondary-blue);
    font-size: 1.2rem;
}

.search-results-indicator span {
    font-family: "Raleway", sans-serif;
    color: var(--dark-gray);
}

.search-results-indicator strong {
    color: var(--primary-orange);
    font-weight: 700;
}

.result-count {
    margin-left: auto;
    padding: 0.5rem 1rem;
    background: var(--primary-orange);
    color: var(--white);
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
}

/* ========================================
   CATÃ‰GORIES AVEC IMAGES (COMME PRODUITS)
======================================== */
.categories-with-images {
    margin-bottom: 4rem;
}

.section-header-categories {
    text-align: center;
    margin-bottom: 3rem;
}

.section-header-categories h2 {
    font-size: 3rem;
    font-family: "Bebas Neue", sans-serif;
    color: var(--secondary-blue);
    letter-spacing: 3px;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.section-header-categories p {
    color: #666;
    font-size: 1.2rem;
    font-family: "Raleway", sans-serif;
}

.categories-grid-images {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 2rem;
}

.category-card-image {
    position: relative;
    background: var(--white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 40px var(--shadow-light);
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    text-decoration: none;
    border: 3px solid transparent;
}

.category-card-image:hover {
    transform: translateY(-15px) scale(1.03);
    box-shadow: 0 25px 60px var(--shadow-medium);
    border-color: var(--primary-orange);
}

.category-card-image.active {
    border-color: var(--primary-orange);
    transform: translateY(-10px);
    box-shadow: 0 20px 50px var(--orange-glow);
}

.category-image-wrapper {
    position: relative;
    height: 220px;
    overflow: hidden;
    background: var(--light-gray);
}

.category-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.category-card-image:hover .category-img {
    transform: scale(1.15) rotate(2deg);
}

.category-img-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--secondary-blue), var(--light-blue));
}

.placeholder-icon {
    font-size: 6rem;
    color: rgba(255, 255, 255, 0.5);
}

.category-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.95), rgba(230, 85, 40, 0.95));
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.4s ease;
}

.category-card-image:hover .category-overlay {
    opacity: 1;
}

.category-overlay-content {
    text-align: center;
    color: var(--white);
    transform: translateY(20px);
    transition: transform 0.4s ease;
}

.category-card-image:hover .category-overlay-content {
    transform: translateY(0);
}

.category-icon-large {
    font-size: 4rem;
    margin-bottom: 1rem;
    display: block;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-10px);
    }
}

.category-overlay-content h3 {
    font-size: 1.8rem;
    font-family: "Bebas Neue", sans-serif;
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.category-overlay-content p {
    font-size: 1.1rem;
    font-family: "Raleway", sans-serif;
    font-weight: 600;
}

.category-info-bottom {
    padding: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.category-info-bottom h4 {
    font-size: 1.3rem;
    font-family: "Montserrat", sans-serif;
    font-weight: 700;
    color: var(--dark-gray);
    margin: 0;
}

.category-count {
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, var(--primary-orange), var(--dark-orange));
    color: var(--white);
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 4px 15px var(--orange-glow);
}

/* ========================================
   GRILLE DE PRODUITS (dÃ©jÃ  stylisÃ©)
======================================== */
.products-showcase {
    margin-top: 3rem;
}

.showcase-header {
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 3px solid var(--border-color);
}

.header-left h2 {
    font-size: 2.5rem;
    font-family: "Bebas Neue", sans-serif;
    color: var(--secondary-blue);
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.result-count {
    color: #666;
    font-size: 1rem;
    font-weight: 600;
}

.products-grid-modern {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 2.5rem;
}

.modern-product-card {
    background: var(--white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 40px var(--shadow-light);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    border: 3px solid transparent;
}

.modern-product-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 50px var(--shadow-medium);
    border-color: var(--primary-orange);
}

.corner-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #f39c12, #e67e22);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-size: 1.3rem;
    z-index: 10;
    box-shadow: 0 5px 20px rgba(243, 156, 18, 0.5);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 5px 20px rgba(243, 156, 18, 0.5);
    }
    50% {
        transform: scale(1.1);
        box-shadow: 0 8px 30px rgba(243, 156, 18, 0.8);
    }
}

.product-image-wrapper {
    position: relative;
    height: 240px;
    overflow: hidden;
    background: var(--light-gray);
}

.product-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.modern-product-card:hover .product-img {
    transform: scale(1.15);
}

.product-img-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ccc;
    font-size: 5rem;
}

.quick-view-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.modern-product-card:hover .quick-view-overlay {
    opacity: 1;
}

.quick-view-btn {
    padding: 1rem 2rem;
    background: var(--white);
    color: var(--primary-orange);
    text-decoration: none;
    border-radius: 30px;
    font-weight: 700;
    font-family: "Montserrat", sans-serif;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.8rem;
}

.quick-view-btn:hover {
    background: var(--primary-orange);
    color: var(--white);
    transform: scale(1.1);
}

.stock-indicator {
    position: absolute;
    bottom: 15px;
    left: 15px;
    padding: 0.6rem 1.2rem;
    border-radius: 25px;
    font-size: 0.85rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    z-index: 5;
    backdrop-filter: blur(10px);
}

.stock-indicator.warning {
    background: rgba(243, 156, 18, 0.95);
    color: var(--white);
    box-shadow: 0 4px 15px rgba(243, 156, 18, 0.5);
}

.stock-indicator.danger {
    background: rgba(231, 76, 60, 0.95);
    color: var(--white);
    box-shadow: 0 4px 15px rgba(231, 76, 60, 0.5);
}

.product-content {
    padding: 1.8rem;
}

.product-category-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    padding: 0.5rem 1.2rem;
    background: linear-gradient(135deg, var(--secondary-blue), var(--light-blue));
    color: var(--white);
    border-radius: 25px;
    font-size: 0.85rem;
    font-weight: 700;
    margin-bottom: 1.2rem;
    box-shadow: 0 4px 15px var(--blue-glow);
}

.product-title {
    font-size: 1.3rem;
    font-family: "Montserrat", sans-serif;
    font-weight: 700;
    color: var(--dark-gray);
    margin-bottom: 0.8rem;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.product-desc {
    color: #666;
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.product-footer-modern {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1.2rem;
    border-top: 2px solid var(--border-color);
    margin-bottom: 1rem;
}

.price-section {
    display: flex;
    align-items: baseline;
    gap: 0.4rem;
}

.price-amount {
    font-size: 2rem;
    font-weight: 800;
    font-family: "Bebas Neue", sans-serif;
    color: var(--primary-orange);
    letter-spacing: 1px;
}

.price-currency {
    font-size: 1rem;
    color: #666;
    font-weight: 600;
}

.quick-add-form {
    display: contents;
}

.add-cart-btn {
    padding: 0.8rem 1.5rem;
    background: linear-gradient(135deg, var(--primary-orange), var(--dark-orange));
    color: var(--white);
    border: none;
    border-radius: 25px;
    font-weight: 700;
    font-family: "Montserrat", sans-serif;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-size: 0.9rem;
    box-shadow: 0 4px 15px var(--orange-glow);
}

.add-cart-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px var(--orange-glow);
}

.add-cart-btn:active {
    transform: translateY(0);
}

.add-cart-btn.disabled {
    background: #95a5a6;
    cursor: not-allowed;
    opacity: 0.6;
}

.add-cart-btn.disabled:hover {
    transform: none;
    box-shadow: none;
}

.stock-info-bottom {
    text-align: center;
    color: #27ae60;
    font-size: 0.9rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

/* Ã‰tat vide */
.empty-state-modern {
    text-align: center;
    padding: 6rem 2rem;
    background: var(--white);
    border-radius: 25px;
    box-shadow: 0 10px 40px var(--shadow-light);
}

.empty-icon {
    font-size: 6rem;
    color: var(--primary-orange);
    margin-bottom: 2rem;
    opacity: 0.5;
}

.empty-state-modern h3 {
    font-size: 2.5rem;
    font-family: "Bebas Neue", sans-serif;
    color: var(--dark-gray);
    margin-bottom: 1rem;
    letter-spacing: 2px;
}

.empty-state-modern p {
    color: #666;
    font-size: 1.2rem;
    margin-bottom: 2.5rem;
}

.btn-back-home {
    display: inline-flex;
    align-items: center;
    gap: 0.8rem;
    padding: 1.2rem 2.5rem;
    background: linear-gradient(135deg, var(--primary-orange), var(--dark-orange));
    color: var(--white);
    text-decoration: none;
    border-radius: 35px;
    font-weight: 700;
    font-family: "Montserrat", sans-serif;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px var(--orange-glow);
}

.btn-back-home:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px var(--orange-glow);
}

/* ========================================
   RESPONSIVE DESIGN
======================================== */
@media (max-width: 1200px) {
    .search-form-improved {
        grid-template-columns: 180px 1fr auto auto;
    }
    
    .categories-grid-images {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
}

@media (max-width: 992px) {
    .search-form-improved {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .filter-left {
        order: 2;
    }
    
    .search-input-improved {
        order: 1;
    }
    
    .search-btn-improved {
        order: 3;
    }
    
    .reset-btn-improved {
        order: 4;
        justify-self: center;
    }
    
    .categories-grid-images {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
    }
}

@media (max-width: 768px) {
    .search-container-improved {
        padding: 1.5rem;
    }
    
    .section-header-categories h2 {
        font-size: 2.2rem;
        flex-direction: column;
    }
    
    .categories-grid-images {
        grid-template-columns: 1fr;
    }
    
    .category-image-wrapper {
        height: 200px;
    }
    
    .products-grid-modern {
        grid-template-columns: 1fr;
        gap: 2rem;
    }
}

@media (max-width: 480px) {
    .search-btn-improved span {
        display: none;
    }
    
    .search-btn-improved {
        padding: 1rem;
    }
    
    .section-header-categories h2 {
        font-size: 1.8rem;
    }
    
    .category-info-bottom {
        flex-direction: column;
        gap: 0.8rem;
        text-align: center;
    }
}
</style>

<!-- AOS Animation Library -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script>
    AOS.init({
        duration: 800,
        once: true,
        offset: 100
    });
</script>
{% endblock %}
 